// ================================================================
// pages/_home.scss
// ================================================================
@use '../abstracts/variables' as v;
@use '../abstracts/mixins' as m;

.sec-head[id] {
  scroll-margin-top: 96px;
}

.wrap {
  max-width: 1320px;
  margin: 0 auto;
  padding-left: v.$sp-8;
  padding-right: v.$sp-8;
}

.sec {
  padding-top: v.$sp-24;
  padding-bottom: v.$sp-24;
}

.sec--light {
  background: v.$c-sand-light;
}

.sec--dark {
  background: v.$c-indigo;
}

.sec--dark .sec-head h2,
.sec--dark .sec-head h3 {
  color: #fff;
}

.sec--dark .sec-head p {
  color: rgba(255, 255, 255, 0.62);
}

.sec--dark .eyebrow {
  color: v.$c-terra-soft;
}

.sec--forms {
  padding-top: v.$sp-20;
  padding-bottom: v.$sp-20;
}

.sec--banner {
  padding-top: v.$sp-8;
  padding-bottom: v.$sp-8;
}

.sec-head {
  margin-bottom: v.$sp-12;
}

.sec-head .eyebrow {
  display: block;
  margin-bottom: v.$sp-3;
}

.sec-head h2 {
  margin-bottom: v.$sp-4;
}

.sec-head p {
  max-width: 560px;
  font-size: v.$fs-18;
}

.sec-head--center {
  text-align: center;
}

.sec-head--center p {
  margin-left: auto;
  margin-right: auto;
}

.sec-head--compact {
  margin-bottom: v.$sp-10;
}

.how-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: v.$sp-5;
}

.skin-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: v.$sp-6;
}

.cat-carousel {
  position: relative;
  padding: 0 v.$sp-12;
}

.cat-carousel__viewport {
  overflow-x: auto;
  padding: v.$sp-2 0 v.$sp-4;
  scroll-behavior: smooth;
  scroll-snap-type: x proximity;
  scrollbar-width: none;
  @include m.focus-ring(v.$c-mustard);
}

.cat-carousel__viewport--teleport {
  scroll-behavior: auto;
  scroll-snap-type: none;
}

.cat-carousel__viewport::-webkit-scrollbar {
  display: none;
}

.cat-grid {
  display: flex;
  gap: v.$sp-4;
  width: max-content;
}

.cat-carousel__arrow {
  @include m.btn-reset;
  position: absolute;
  top: 50%;
  z-index: v.$z-up;
  width: 52px;
  height: 52px;
  border: 1px solid rgba(255, 255, 255, 0.18);
  border-radius: 50%;
  background: rgba(v.$c-indigo, 0.92);
  color: #fff;
  box-shadow: v.$shadow-md;
  font-size: v.$fs-20;
  transform: translateY(-50%);
  transition: transform v.$ease-base, background v.$ease-base, opacity v.$ease-base;
  @include m.flex-center;

  &:hover:not(:disabled) {
    background: v.$c-terra;
    transform: translateY(-50%) scale(1.05);
  }

  &:disabled {
    opacity: 0.35;
    cursor: default;
  }
}

.cat-carousel__arrow--prev {
  left: 0;
}

.cat-carousel__arrow--next {
  right: 0;
}

.cat-grid .fabric-card {
  flex: 0 0 min(280px, calc(100vw - 6rem));
  max-width: 280px;
  scroll-snap-align: start;
}

.sc-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: v.$sp-6;
}

.cat-filters {
  display: flex;
  flex-wrap: wrap;
  gap: v.$sp-2;
  margin-bottom: v.$sp-8;
}

.cf-btn,
.sec-catalog__filter-btn {
  @include m.btn-reset;
  padding: v.$sp-2 v.$sp-4;
  border: 1.5px solid rgba(255, 255, 255, 0.2);
  border-radius: v.$r-full;
  color: rgba(255, 255, 255, 0.66);
  font-size: v.$fs-13;
  font-weight: 600;
  transition: all v.$ease-base;
}

.cf-btn.active,
.cf-btn:hover,
.sec-catalog__filter-btn.active,
.sec-catalog__filter-btn:hover {
  border-color: v.$c-terra;
  background: v.$c-terra;
  color: #fff;
}

.skin-cta-box {
  margin-top: v.$sp-12;
  padding: v.$sp-12 v.$sp-8;
  border-radius: v.$r-2xl;
  background: v.$c-indigo;
  text-align: center;
  position: relative;
  overflow: hidden;
}

.skin-cta-box::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: repeating-linear-gradient(
    45deg,
    rgba(255, 255, 255, 0.025) 0,
    rgba(255, 255, 255, 0.025) 1px,
    transparent 1px,
    transparent 10px
  );
}

.skin-cta-box h3,
.skin-cta-box p,
.cta-actions {
  position: relative;
  z-index: 1;
}

.skin-cta-box h3 {
  margin-bottom: v.$sp-3;
  color: #fff;
}

.skin-cta-box p {
  max-width: 440px;
  margin: 0 auto v.$sp-6;
  color: rgba(255, 255, 255, 0.66);
}

.cta-actions {
  @include m.flex(row, center, center, v.$sp-3);
  flex-wrap: wrap;
}

.form-bg {
  @include m.woven-bg(v.$c-sand, v.$c-umber, 5px);
}

.form-inner {
  position: relative;
  overflow: hidden;
  padding: v.$sp-12;
  border: 1px solid v.$c-linen;
  border-radius: v.$r-2xl;
  background: v.$c-white;
  box-shadow: v.$shadow-xl;
}

.form-inner::before {
  content: '';
  position: absolute;
  top: -60px;
  right: -60px;
  width: 200px;
  height: 200px;
  border-radius: 50%;
  background: rgba(v.$c-terra, 0.05);
  pointer-events: none;
}

.banner-box {
  position: relative;
  overflow: hidden;
  padding: v.$sp-16 v.$sp-8;
  border-radius: v.$r-2xl;
  background: v.$c-terra;
  text-align: center;
}

.banner-box::before {
  content: '';
  position: absolute;
  top: -50px;
  left: -50px;
  width: 220px;
  height: 220px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.06);
}

.banner-box::after {
  content: '';
  position: absolute;
  right: -40px;
  bottom: -40px;
  width: 180px;
  height: 180px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.08);
}

.banner-box h2,
.banner-box p,
.banner-actions {
  position: relative;
  z-index: 1;
}

.banner-box h2 {
  margin-bottom: v.$sp-4;
  color: #fff;
  font-size: clamp(2rem, 4.5vw, 3.2rem);
}

.banner-box p {
  max-width: 480px;
  margin: 0 auto v.$sp-8;
  color: rgba(255, 255, 255, 0.82);
  font-size: v.$fs-18;
}

.banner-actions {
  @include m.flex(row, center, center, v.$sp-4);
  flex-wrap: wrap;
}

.fade-up {
  opacity: 0;
  transform: translateY(28px);
  transition: opacity 0.65s v.$ease-out, transform 0.65s v.$ease-out;
}

.fade-up.in {
  opacity: 1;
  transform: translateY(0);
}

.delay-1 {
  transition-delay: 0.08s;
}

.delay-2 {
  transition-delay: 0.16s;
}

.delay-3 {
  transition-delay: 0.24s;
}

.delay-4 {
  transition-delay: 0.32s;
}

.divider {
  @include m.flex(row, center, center, v.$sp-4);
  margin: v.$sp-6 0;
  font-family: v.$font-mono;
  font-size: v.$fs-11;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: v.$c-umber-soft;
}

.divider::before,
.divider::after {
  content: '';
  flex: 1;
  height: 1px;
  background: v.$c-sand-dark;
}

.group-err {
  margin-top: v.$sp-2;
  color: v.$c-terra;
  font-size: v.$fs-12;
  font-weight: 600;
}

.toast {
  position: fixed;
  right: v.$sp-6;
  bottom: v.$sp-6;
  z-index: v.$z-toast;
  max-width: 320px;
  padding: v.$sp-3 v.$sp-5;
  border-radius: v.$r-lg;
  background: v.$c-indigo;
  color: #fff;
  box-shadow: v.$shadow-xl;
  font-size: v.$fs-14;
  font-weight: 500;
  transform: translateY(80px);
  opacity: 0;
  transition: all v.$ease-spring;
  @include m.flex(row, center, flex-start, v.$sp-3);
}

.toast.show {
  transform: translateY(0);
  opacity: 1;
}

.toast__ico {
  font-size: 1.1rem;
}

.toast--ok {
  border-left: 3px solid v.$c-sage;
}

.toast--err {
  border-left: 3px solid v.$c-terra;
}

.toast--inf {
  border-left: 3px solid v.$c-mustard;
}

.scroll-top {
  position: fixed;
  left: v.$sp-6;
  bottom: v.$sp-6;
  z-index: v.$z-fixed;
  width: 42px;
  height: 42px;
  border: 0;
  border-radius: 50%;
  background: v.$c-indigo2;
  color: #fff;
  font-size: v.$fs-16;
  box-shadow: v.$shadow-md;
  cursor: pointer;
  opacity: 0;
  transform: translateY(8px);
  transition: all v.$ease-base;
  @include m.flex-center;
}

.scroll-top.on {
  opacity: 1;
  transform: translateY(0);
}

.scroll-top:hover {
  background: v.$c-terra;
  transform: translateY(-2px);
}

// ================================================================
// Modal Directorio de Sastres
// ================================================================
.modal-sastres {
  .modal-content {
    border: 1px solid rgba(v.$c-linen, 0.9);
    border-radius: v.$r-xl;
    background: v.$c-white;
    box-shadow: v.$shadow-xl;
    overflow: hidden;
  }
}

.modal-sastres__header,
.modal-sastres__footer {
  border-color: rgba(v.$c-linen, 0.85);
}

.modal-sastres__header {
  align-items: flex-start;
  gap: v.$sp-4;
  padding: v.$sp-5 v.$sp-6;
  background:
    radial-gradient(circle at top left, rgba(v.$c-mustard, 0.18), transparent 42%),
    linear-gradient(135deg, rgba(v.$c-sand, 0.98), rgba(v.$c-sand-light, 0.96));

  .modal-title {
    color: v.$c-indigo;
    font-family: v.$font-serif;
    font-size: clamp(2rem, 2.7vw, 2.4rem);
  }
}

.modal-sastres__eyebrow {
  color: v.$c-umber-soft;
  font-family: v.$font-mono;
  font-size: v.$fs-11;
  letter-spacing: 0.12em;
  text-transform: uppercase;
}

.modal-sastres__lead {
  color: v.$c-umber-soft;
  font-size: v.$fs-14;
  line-height: 1.6;
}

.modal-sastres__body {
  padding: v.$sp-5 v.$sp-6;
  background: rgba(v.$c-sand-light, 0.72);
}

.modal-sastres__summary {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: v.$sp-4;
  margin-bottom: v.$sp-4;
  padding: v.$sp-3 v.$sp-4;
  border: 1px solid rgba(v.$c-linen, 0.9);
  border-radius: v.$r-lg;
  background: rgba(255, 255, 255, 0.88);
}

.modal-sastres__summary-copy {
  display: flex;
  flex-direction: column;
  gap: v.$sp-1;

  strong {
    color: v.$c-indigo;
  }

  span {
    color: v.$c-umber-soft;
    font-size: v.$fs-14;
  }
}

.modal-sastres__count {
  flex-shrink: 0;
  font-size: v.$fs-12;
  letter-spacing: 0.04em;
}

.modal-sastres__sheet {
  border: 1px solid rgba(v.$c-linen, 0.95);
  border-radius: v.$r-lg;
  background: #fff;
  box-shadow: v.$shadow-sm;
}

.modal-sastres__sheet table {
  margin-bottom: 0;
}

.modal-sastres__sheet thead th {
  color: v.$c-indigo;
  font-size: v.$fs-12;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  white-space: nowrap;
}

.modal-sastres__sheet tbody td {
  color: v.$c-umber;
  font-size: v.$fs-14;
  vertical-align: middle;
}

.sastres-directorio__row {
  cursor: pointer;
  transition: background-color v.$ease-base, transform v.$ease-base;

  &:focus-visible {
    outline: 2px solid v.$c-mustard;
    outline-offset: -2px;
  }

  &.is-active td {
    background: rgba(v.$c-mustard, 0.12);
  }
}

.sastres-directorio__phone {
  color: v.$c-indigo;
  font-weight: 600;
  text-decoration: none;

  &:hover {
    color: v.$c-terra;
  }
}

.modal-sastres__footer {
  padding: v.$sp-4 v.$sp-6;
  background: rgba(255, 255, 255, 0.96);
}

// ================================================================
// Modal Galería de Telas
// ================================================================
.modal-galeria {
  position: fixed;
  inset: 0;
  z-index: v.$z-modal;
  padding: v.$sp-6;
  background: rgba(v.$c-umber, 0.85);
  opacity: 0;
  visibility: hidden;
  transition: all v.$ease-base;
  
  &.active {
    opacity: 1;
    visibility: visible;
    
    .modal-galeria__dialog {
      transform: translateY(0) scale(1);
    }
  }
}

.modal-galeria__dialog {
  position: relative;
  width: min(1100px, 100%);
  max-height: calc(100vh - #{v.$sp-12});
  margin: 0 auto;
  overflow: auto;
  border-radius: v.$r-xl;
  background: v.$c-white;
  box-shadow: v.$shadow-xl;
  transform: translateY(18px) scale(0.97);
  transition: transform v.$ease-spring;
}

.modal-galeria__layout {
  display: grid;
  grid-template-columns: minmax(0, 1.1fr) minmax(320px, 0.9fr);
  min-height: min(720px, calc(100vh - #{v.$sp-12}));
}

.modal-galeria__close {
  position: absolute;
  top: v.$sp-4;
  right: v.$sp-4;
  z-index: v.$z-up;
  width: 40px;
  height: 40px;
  border: none;
  border-radius: 50%;
  background: v.$c-white;
  color: v.$c-umber;
  font-size: v.$fs-18;
  cursor: pointer;
  transition: all v.$ease-base;
  @include m.flex-center;
  
  &:hover {
    background: v.$c-terra;
    color: #fff;
    transform: rotate(90deg);
  }
}

.modal-galeria__content {
  padding: v.$sp-6;
  background:
    radial-gradient(circle at top left, rgba(v.$c-mustard, 0.18), transparent 46%),
    linear-gradient(135deg, rgba(v.$c-sand, 0.96), rgba(v.$c-sand-light, 0.98));
  
  img {
    display: block;
    width: 100%;
    height: 100%;
    min-height: 420px;
    object-fit: cover;
    border-radius: v.$r-lg;
    box-shadow: v.$shadow-lg;
  }
}

.modal-galeria__panel {
  display: flex;
  flex-direction: column;
  gap: v.$sp-5;
  padding: v.$sp-6;
}

.modal-galeria__head {
  display: flex;
  flex-direction: column;
  gap: v.$sp-2;
}

.modal-galeria__head h3 {
  margin: 0;
  color: v.$c-indigo;
  font-family: v.$font-serif;
  font-size: clamp(2rem, 2.8vw, 2.6rem);
}

.modal-galeria__eyebrow {
  margin: 0;
  font-family: v.$font-mono;
  font-size: v.$fs-11;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: v.$c-umber-soft;
}

.modal-galeria__lead {
  margin: 0;
  color: v.$c-umber-soft;
  font-size: v.$fs-16;
  line-height: 1.6;
}

.modal-galeria__pricebox {
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  gap: v.$sp-4;
  padding: v.$sp-4;
  border: 1px solid rgba(v.$c-linen, 0.95);
  border-radius: v.$r-lg;
  background: rgba(v.$c-sand-light, 0.96);
}

.modal-galeria__pricecopy {
  display: flex;
  flex-direction: column;
  gap: v.$sp-1;

  span {
    font-size: v.$fs-12;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: v.$c-umber-soft;
  }

  strong {
    font-size: v.$fs-28;
    color: v.$c-terra;
  }
}

.modal-galeria__meters {
  display: flex;
  flex-direction: column;
  gap: v.$sp-2;
  min-width: 110px;

  span {
    font-size: v.$fs-12;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: v.$c-umber-soft;
  }

  input {
    width: 100%;
    padding: v.$sp-2 v.$sp-3;
    border: 1px solid v.$c-linen;
    border-radius: v.$r-md;
    background: #fff;
    color: v.$c-indigo;
    font-weight: 600;
  }
}

.modal-galeria__total {
  grid-column: 1 / -1;
  padding-top: v.$sp-3;
  border-top: 1px solid rgba(v.$c-linen, 0.8);
}

.modal-galeria__total-line {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: v.$sp-3;
  margin-bottom: v.$sp-2;
  font-size: v.$fs-14;
  color: v.$c-umber;
}

.modal-galeria__total-line:last-child {
  margin-bottom: 0;
}

.modal-galeria__total-line strong {
  color: v.$c-indigo;
}

.modal-galeria__total-line--final strong {
  color: v.$c-terra;
  font-size: v.$fs-20;
}

.modal-galeria__section {
  display: flex;
  flex-direction: column;
  gap: v.$sp-3;

  h4 {
    margin: 0;
    color: v.$c-indigo;
    font-size: v.$fs-18;
    font-family: v.$font-body;
    text-transform: uppercase;
    letter-spacing: 0.08em;
  }

  p {
    margin: 0;
    color: v.$c-umber;
    line-height: 1.6;
  }
}

.modal-galeria__specs,
.modal-galeria__offers,
.modal-galeria__shipping {
  display: grid;
  gap: v.$sp-3;
}

.modal-spec,
.modal-offer,
.modal-shipping {
  padding: v.$sp-3 v.$sp-4;
  border: 1px solid rgba(v.$c-linen, 0.9);
  border-radius: v.$r-md;
  background: rgba(v.$c-sand-light, 0.94);
}

.modal-shipping {
  display: flex;
  flex-direction: column;
  gap: v.$sp-3;
  transition: border-color v.$ease-base, box-shadow v.$ease-base, transform v.$ease-base;
}

.modal-shipping.is-selected {
  border-color: rgba(v.$c-terra, 0.55);
  box-shadow: 0 10px 24px rgba(v.$c-terra, 0.12);
}

.modal-shipping.is-expanded {
  transform: translateY(-1px);
}

.modal-spec {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: v.$sp-3;
}

.modal-spec span {
  font-size: v.$fs-12;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: v.$c-umber-soft;
}

.modal-spec strong {
  color: v.$c-indigo;
  text-align: right;
}

.modal-offer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: v.$sp-4;
}

.modal-offer__label {
  display: flex;
  flex-direction: column;
  gap: v.$sp-1;
}

.modal-offer__label span {
  font-size: v.$fs-12;
  color: v.$c-umber-soft;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.modal-offer__label strong {
  color: v.$c-indigo;
}

.modal-offer__price {
  text-align: right;
}

.modal-offer__price strong {
  color: v.$c-terra;
  font-size: v.$fs-18;
}

.modal-offer__price span {
  display: block;
  margin-top: v.$sp-1;
  font-size: v.$fs-12;
  color: v.$c-umber-soft;
}

.modal-shipping__head,
.modal-shipping__row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: v.$sp-3;
}

.modal-shipping__summary {
  width: 100%;
  padding: 0;
  border: 0;
  background: transparent;
  cursor: pointer;
  text-align: left;
}

.modal-shipping__head {
  margin-bottom: 0;
}

.modal-shipping__title {
  display: flex;
  flex-direction: column;
  gap: v.$sp-1;
}

.modal-shipping__title strong {
  color: v.$c-indigo;
}

.modal-shipping__title span,
.modal-shipping__row span {
  color: v.$c-umber-soft;
  font-size: v.$fs-13;
}

.modal-shipping__price {
  color: v.$c-terra;
  font-size: v.$fs-18;
}

.modal-shipping__details {
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  pointer-events: none;
  transition: max-height v.$ease-slow, opacity v.$ease-base;
}

.modal-shipping.is-expanded .modal-shipping__details {
  max-height: 320px;
  opacity: 1;
  pointer-events: auto;
}

.modal-shipping__row {
  padding-top: v.$sp-2;
  border-top: 1px dashed rgba(v.$c-linen, 0.9);
}

.modal-shipping__row strong {
  color: v.$c-indigo;
}

.modal-shipping__select {
  width: 100%;
  margin-top: v.$sp-3;
  padding: v.$sp-2 v.$sp-4;
  border: 0;
  border-radius: v.$r-full;
  background: v.$c-indigo;
  color: v.$c-white;
  cursor: pointer;
  font-size: v.$fs-12;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  transition: background v.$ease-base, transform v.$ease-base;
}

.modal-shipping__select:hover {
  background: v.$c-indigo2;
  transform: translateY(-1px);
}

.modal-shipping.is-selected .modal-shipping__select {
  background: v.$c-terra;
}

// ================================================================
// Fabric Card - Click para galería
// ================================================================
.fabric-card {
  cursor: pointer;
  
  &:hover .fc-wrap {
    box-shadow: 0 0 0 3px v.$c-terra;
  }
}

@media (max-width: v.$bp-lg) {
  .how-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .skin-grid,
  .sc-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .cat-carousel {
    padding: 0 v.$sp-10;
  }

  .modal-galeria__layout {
    grid-template-columns: 1fr;
  }

  .modal-galeria__content img {
    min-height: 320px;
  }

  .modal-sastres__summary {
    align-items: flex-start;
    flex-direction: column;
  }
}

@media (max-width: v.$bp-sm) {
  .wrap {
    padding-left: v.$sp-5;
    padding-right: v.$sp-5;
  }

  .sec {
    padding-top: v.$sp-16;
    padding-bottom: v.$sp-16;
  }

  .how-grid,
  .skin-grid,
  .sc-grid {
    grid-template-columns: 1fr;
  }

  .cat-carousel {
    padding: 0 v.$sp-8;
  }

  .cat-carousel__arrow {
    width: 42px;
    height: 42px;
    font-size: v.$fs-16;
  }

  .cat-grid .fabric-card {
    flex-basis: min(250px, calc(100vw - 5.5rem));
    max-width: 250px;
  }

  .modal-sastres__header,
  .modal-sastres__body,
  .modal-sastres__footer {
    padding-left: v.$sp-4;
    padding-right: v.$sp-4;
  }

  .form-inner {
    padding: v.$sp-8 v.$sp-5;
  }

  .banner-box {
    padding: v.$sp-12 v.$sp-5;
  }

  .modal-galeria {
    padding: v.$sp-3;
  }

  .modal-galeria__content,
  .modal-galeria__panel {
    padding: v.$sp-4;
  }

  .modal-galeria__pricebox {
    grid-template-columns: 1fr;
  }

  .modal-galeria__meters {
    min-width: 0;
  }

  .modal-spec,
  .modal-offer,
  .modal-shipping__head,
  .modal-shipping__row {
    align-items: flex-start;
    flex-direction: column;
  }

  .modal-galeria__total-line {
    align-items: flex-start;
    flex-direction: column;
  }

  .modal-shipping__price {
    font-size: v.$fs-16;
  }

  .modal-shipping__select {
    padding-left: v.$sp-3;
    padding-right: v.$sp-3;
    font-size: v.$fs-11;
  }
}
